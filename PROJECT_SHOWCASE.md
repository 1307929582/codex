# 🚀 Codex Gateway - 项目展示

**一个真正零配置的企业级OpenAI API网关**

---

## 🎯 项目简介

Codex Gateway 是一个**开箱即用**的OpenAI API网关解决方案，提供完整的多用户管理、自动计费、管理员面板等企业级功能。

### 为什么选择 Codex Gateway？

- 🎯 **零配置部署**：一个命令完成所有部署，无需手动配置
- 🎨 **WordPress风格向导**：3步完成系统配置，友好的Web界面
- 🛡️ **完整管理面板**：用户管理、系统配置、操作审计一应俱全
- 💰 **精确计费系统**：Token级精度，原子化事务，多模型支持
- 🔐 **企业级安全**：JWT认证、角色权限、审计日志、请求保护

---

## ⚡ 快速体验

### 3个命令，60秒部署

```bash
git clone https://github.com/1307929582/codex.git
cd codex
./deploy-auto.sh
```

访问 `http://localhost:3000`，完成3步配置，立即开始使用！

---

## 🎬 功能演示

### 1. 一键部署

```bash
$ ./deploy-auto.sh

================================
  Codex Gateway 一键部署
================================

[1/7] 检查系统要求...
✓ Docker已安装

[2/7] 停止现有服务...

[3/7] 生成配置文件...
✓ 配置文件已生成
注意: 数据库密码和JWT密钥已自动生成

[4/7] 构建Docker镜像...
[+] Building 45.2s

[5/7] 启动服务...
[+] Running 3/3
 ✔ Container codex-postgres  Started
 ✔ Container codex-backend   Started
 ✔ Container codex-frontend  Started

[6/7] 等待服务就绪...
等待数据库启动 ✓
等待后端启动 ✓

[7/7] 检查管理员账户...

================================
部署完成！
================================

访问地址：
  前端:        http://localhost:3000
  管理员面板:  http://localhost:3000/admin
  后端API:     http://localhost:8080
```

### 2. 首次安装向导

访问 `http://localhost:3000` 后自动进入配置向导：

**Step 1: 创建管理员账户**
- 输入邮箱和密码
- 系统自动验证

**Step 2: 配置OpenAI**
- 输入OpenAI API密钥
- 可选：自定义Base URL

**Step 3: 系统设置**
- 可选：设置系统公告
- 可选：配置默认余额
- 可选：注册开关

点击"完成设置"后，自动登录到管理员面板！

### 3. 管理员面板

#### Dashboard
```
┌─────────────────────────────────────────────────────────┐
│ 总用户数    │ 总收入      │ 总消费      │ API密钥数   │
│    156      │  $1,234.56  │  $987.65    │    342      │
│ +12 今日    │ +$45.67 今日│ +$32.10 今日│ +8 今日     │
└─────────────────────────────────────────────────────────┘
```

#### 用户管理
- 搜索用户
- 查看详情
- 调整余额
- 暂停/激活

#### 系统设置
- OpenAI配置（实时生效）
- 系统公告
- 用户设置
- 注册开关

#### 操作日志
- 所有管理员操作记录
- IP地址追踪
- 详细信息

### 4. API调用

```bash
# 使用API密钥调用OpenAI
curl -X POST http://localhost:8080/v1/chat/completions \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-3.5-turbo",
    "messages": [{"role": "user", "content": "Hello!"}]
  }'
```

自动计费，实时扣费，记录使用！

---

## 🌟 核心特性

### 零配置部署

**传统方式**（需要10+步骤）：
1. 克隆代码
2. 复制配置文件
3. 编辑数据库密码
4. 生成JWT密钥
5. 配置OpenAI密钥
6. 启动服务
7. 连接数据库
8. 创建管理员
9. 配置系统参数
10. 测试功能

**Codex Gateway**（3个命令）：
```bash
git clone https://github.com/1307929582/codex.git
cd codex
./deploy-auto.sh
```

所有配置自动生成，Web界面完成设置！

### WordPress风格向导

- 🎯 **3步完成配置**：简单直观
- 📊 **进度条显示**：清晰明了
- ✅ **表单验证**：实时反馈
- 🔐 **自动登录**：无缝体验

### 完整管理面板

#### 用户管理
- 📊 用户列表（搜索、筛选、分页）
- 👁 用户详情（基本信息、统计数据）
- 💰 余额调整（充值/扣除，带说明）
- ⏸ 状态管理（暂停/激活）

#### 系统设置
- 🔑 OpenAI配置（API密钥、Base URL）
- 📢 系统公告（多行文本）
- 💵 用户设置（默认余额、最小充值）
- 🚪 注册开关（开启/关闭）

#### 操作日志
- 📝 审计追踪（所有操作记录）
- 🕐 详细信息（时间、操作、目标、IP）
- 📄 分页浏览（每页50条）

### 精确计费系统

- ⚛️ **原子化事务**：GORM Transaction保证
- 🎯 **Token级精度**：精确到每个Token
- 💰 **多模型支持**：不同模型不同定价
- 📊 **实时扣费**：API调用完成立即扣费
- 📈 **使用统计**：完整的使用记录

### 企业级安全

- 🔐 **JWT认证**：用户身份验证
- 🔑 **API密钥**：安全的API访问
- 👥 **角色权限**：user/admin/super_admin
- 📝 **审计日志**：所有操作可追溯
- 🛡️ **请求保护**：大小限制、超时保护

---

## 📊 技术架构

### 技术栈

**后端**
- Go 1.21+ (高性能)
- Gin (HTTP框架)
- GORM (ORM)
- PostgreSQL 15 (数据库)
- JWT (认证)

**前端**
- Next.js 14 (React框架)
- TypeScript (类型安全)
- Tailwind CSS (样式)
- TanStack Query (状态管理)

**部署**
- Docker (容器化)
- Docker Compose (编排)

### 系统架构

```
┌─────────────────────────────────────────────────────────┐
│                        用户                              │
└────────────────────┬────────────────────────────────────┘
                     │
                     ▼
┌─────────────────────────────────────────────────────────┐
│                   Next.js 前端                           │
│  ┌──────────┬──────────┬──────────┬──────────┐         │
│  │ 用户页面 │ 管理面板 │ 安装向导 │ API密钥  │         │
│  └──────────┴──────────┴──────────┴──────────┘         │
└────────────────────┬────────────────────────────────────┘
                     │ HTTP/REST
                     ▼
┌─────────────────────────────────────────────────────────┐
│                    Go 后端 API                           │
│  ┌──────────┬──────────┬──────────┬──────────┐         │
│  │ 认证API  │ 用户API  │ 管理API  │ 代理API  │         │
│  └──────────┴──────────┴──────────┴──────────┘         │
│  ┌──────────┬──────────┬──────────┐                    │
│  │ JWT验证  │ 角色验证 │ 计费系统 │                    │
│  └──────────┴──────────┴──────────┘                    │
└────────────────────┬────────────────────────────────────┘
                     │
        ┌────────────┴────────────┐
        │                         │
        ▼                         ▼
┌──────────────┐         ┌──────────────┐
│ PostgreSQL   │         │   OpenAI     │
│   数据库     │         │     API      │
└──────────────┘         └──────────────┘
```

### 数据库设计

**6个核心表**：
- `users` - 用户信息
- `api_keys` - API密钥
- `usage_records` - 使用记录
- `model_pricing` - 模型定价
- `system_settings` - 系统设置
- `admin_logs` - 操作日志

---

## 📈 项目数据

### 代码统计

```
后端（Go）:
  文件数: 15个
  代码行数: ~3,500行
  API端点: 25个

前端（TypeScript/React）:
  文件数: 35个
  代码行数: ~5,000行
  页面: 12个

文档:
  文档数: 13个
  总字数: ~26,000字
  代码示例: 100+个
```

### 功能完成度

```
✅ 核心功能: 100%
✅ 管理功能: 100%
✅ 用户功能: 100%
✅ 安全功能: 100%
✅ 文档: 100%
```

---

## 🎯 使用场景

### 场景1: 个人开发者
- 快速搭建OpenAI API代理
- 管理多个项目的API密钥
- 跟踪API使用和费用

### 场景2: 小团队
- 为团队成员提供统一的API访问
- 管理团队成员的余额和权限
- 查看团队的使用统计

### 场景3: 企业应用
- 为客户提供OpenAI API服务
- 完整的计费和结算系统
- 操作审计和安全保护

### 场景4: 教育机构
- 为学生提供AI学习环境
- 控制每个学生的使用额度
- 监控和管理使用情况

---

## 📚 完整文档

### 快速开始
- [QUICK_START.md](./QUICK_START.md) - 3个命令快速部署
- [README_DEPLOY.md](./README_DEPLOY.md) - 完整部署指南
- [DEPLOYMENT_CHECKLIST.md](./DEPLOYMENT_CHECKLIST.md) - 部署检查清单

### 使用指南
- [ADMIN_GUIDE.md](./ADMIN_GUIDE.md) - 管理员完整使用指南
- [FEATURES_DEMO.md](./FEATURES_DEMO.md) - 功能演示（带界面）
- [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - 常用命令快速参考

### 技术文档
- [API_DOCUMENTATION.md](./API_DOCUMENTATION.md) - 完整API文档
- [PROJECT_SUMMARY.md](./PROJECT_SUMMARY.md) - 项目技术总结
- [RELEASE_NOTES_v2.0.md](./RELEASE_NOTES_v2.0.md) - v2.0发布说明

### 完整索引
- [DOCUMENTATION_INDEX.md](./DOCUMENTATION_INDEX.md) - 文档导航中心

---

## 🚀 立即开始

### 系统要求
- Docker 20.10+
- Docker Compose 2.0+
- 4GB+ RAM
- 10GB+ 磁盘空间

### 部署步骤

```bash
# 1. 克隆代码
git clone https://github.com/1307929582/codex.git
cd codex

# 2. 一键部署
./deploy-auto.sh

# 3. 打开浏览器
open http://localhost:3000
```

就这么简单！

---

## 🌟 项目亮点

### 1. 真正的零配置
- ❌ 不需要编辑配置文件
- ❌ 不需要手动生成密码
- ❌ 不需要执行SQL命令
- ✅ 一个命令完成所有部署

### 2. WordPress风格
- 🎯 3步完成配置
- 📊 进度条显示
- ✅ 表单验证
- 🔐 自动登录

### 3. 完整管理
- 👥 用户管理
- ⚙️ 系统配置
- 📝 操作审计
- 📊 统计分析

### 4. 企业安全
- 🔐 JWT认证
- 👥 角色权限
- 📝 审计日志
- 🛡️ 请求保护

### 5. 精确计费
- ⚛️ 原子化事务
- 🎯 Token级精度
- 💰 多模型支持
- 📊 实时扣费

---

## 📞 获取支持

### 文档
- 📖 [完整文档索引](./DOCUMENTATION_INDEX.md)
- 🚀 [快速开始指南](./QUICK_START.md)
- 📋 [快速参考](./QUICK_REFERENCE.md)

### 社区
- 🐛 [GitHub Issues](https://github.com/1307929582/codex/issues)
- 💬 讨论区（待添加）
- 📧 邮件支持（待添加）

---

## 📄 许可证

MIT License - 自由使用、修改和分发

---

## 🙏 致谢

感谢所有使用和支持 Codex Gateway 的用户！

---

## 🎉 立即体验

```bash
git clone https://github.com/1307929582/codex.git
cd codex
./deploy-auto.sh
```

**3个命令，60秒部署，立即开始使用！**

---

**项目**: Codex Gateway
**版本**: v2.0.0
**状态**: ✅ 生产就绪
**仓库**: https://github.com/1307929582/codex
**许可证**: MIT
